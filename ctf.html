<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>ä¸‰ç„¦ç§˜å¢ƒ Â· è¶£å‘³ä¸­åŒ»é—®è¯Š</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
		<link
			href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap"
			rel="stylesheet">
		<style>
			* {
				font-family: 'Noto Sans SC', sans-serif;
			}

			.title-font {
				font-family: 'Noto Serif SC', serif;
			}

			.step {
				transition: opacity 0.3s;
			}

			.photo-box {
				background: white;
				border: 2px dashed #d1d5db;
				border-radius: 4px;
				height: 140px;
				display: flex;
				align-items: center;
				justify-content: center;
				color: #9ca3af;
				font-size: 12px;
				position: relative;
				cursor: pointer;
				overflow: hidden;
			}

			.photo-box:hover {
				border-color: #dc2626;
				background-color: #fef2f2;
			}

			.photo-preview {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				object-fit: cover;
			}

			.photo-placeholder {
				z-index: 1;
				background: transparent;
			}

			.hidden-input {
				display: none;
			}

			.checkbox-group {
				display: flex;
				flex-wrap: wrap;
				gap: 8px;
			}

			.checkbox-item {
				display: inline-flex;
				align-items: center;
				background: #f9fafb;
				padding: 6px 12px;
				border-radius: 30px;
				font-size: 9.5pt;
				border: 1px solid #e5e7eb;
				cursor: pointer;
				transition: all 0.1s;
			}

			.checkbox-item input[type=checkbox] {
				display: none;
			}

			.checkbox-item:has(input:checked) {
				background: #fee2e2;
				border-color: #dc2626;
				color: #b91c1c;
			}

			.card {
				background: white;
				border-radius: 12px;
				padding: 1rem;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
				border: 1px solid #f0e9e0;
			}

			.step-indicator {
				display: flex;
				gap: 0.5rem;
				justify-content: center;
				margin-bottom: 1.5rem;
			}

			.step-dot {
				width: 32px;
				height: 32px;
				border-radius: 50%;
				background: #e5e7eb;
				display: flex;
				align-items: center;
				justify-content: center;
				font-size: 14px;
				color: #4b5563;
			}

			.step-dot.active {
				background: #b91c1c;
				color: white;
			}

			.step-dot.completed {
				background: #dc2626;
				color: white;
			}

			.btn-nav {
				background: #b91c1c;
				color: white;
				padding: 8px 24px;
				border-radius: 40px;
				font-weight: 500;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
			}

			.btn-nav:disabled {
				opacity: 0.3;
				cursor: not-allowed;
			}

			.result-table {
				width: 100%;
				border-collapse: collapse;
				background: white;
				border-radius: 16px;
				overflow: hidden;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
			}

			.result-table th {
				background: #fef2f2;
				color: #b91c1c;
				font-weight: 600;
				padding: 12px;
			}

			.result-table td {
				border-bottom: 1px solid #f0e9e0;
				padding: 16px;
				vertical-align: middle;
			}

			.mini-photo {
				width: 60px;
				height: 60px;
				border-radius: 8px;
				object-fit: cover;
				border: 1px solid #ddd;
			}

			.no-print {
				z-index: 50;
			}

			@media print {
				.no-print {
					display: none;
				}
			}

			/* å°è¯ç«¥æ°”æ³¡ */
			.herbalist-bubble {
				background: #fef3c7;
				border-radius: 20px;
				padding: 8px 16px;
				position: relative;
				border: 1px solid #fbbf24;
				color: #92400e;
				font-size: 14px;
				max-width: 220px;
			}

			.herbalist-bubble:after {
				content: '';
				position: absolute;
				left: -10px;
				top: 20px;
				width: 0;
				height: 0;
				border-top: 10px solid transparent;
				border-bottom: 10px solid transparent;
				border-right: 10px solid #fef3c7;
			}
		</style>
	</head>
	<body class="bg-amber-50/40 py-4 px-2 min-h-screen flex items-start justify-center relative">
		<!-- å°è¯ç«¥åŒºåŸŸ (å›ºå®šå·¦ä¾§) -->
		<div class="fixed left-2 top-20 hidden md:block z-50 no-print">
			<div class="flex items-end gap-2">
				<div
					class="w-24 h-24 bg-amber-100 rounded-full border-4 border-amber-300 flex items-center justify-center text-5xl">
					ğŸ§‘â€ğŸŒ¾</div>
				<div class="herbalist-bubble" id="herbalistTalk">æ¥å•¦ï½ å¡«å¡«ä½ çš„ä¸‰ç„¦å§ğŸŒ¿</div>
			</div>
			<!-- ç§¯åˆ†å¾½ç«  -->
			<div class="mt-4 bg-white/80 rounded-full px-4 py-2 shadow flex items-center gap-2 border border-amber-200">
				<span class="text-2xl">â­</span>
				<span id="scoreDisplay" class="font-bold text-amber-800">0</span> å…ƒæ°”
			</div>
		</div>

		<!-- æµ®åŠ¨PDFæŒ‰é’® (å³ä¾§) -->
		<div class="fixed right-4 top-4 flex flex-col gap-2 no-print z-50">
			<button onclick="generatePDF()"
				class="bg-red-700 text-white p-2 rounded-full shadow-lg w-10 h-10 flex items-center justify-center"
				title="å¯¼å‡ºä¸“ä¸šPDF"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
						d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
				</svg></button>
			<button onclick="window.print()"
				class="bg-gray-700 text-white p-2 rounded-full shadow-lg w-10 h-10 flex items-center justify-center"
				title="æ‰“å°è¶£å‘³ç”»åƒ"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
						d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
				</svg></button>
		</div>

		<!-- ä¸»å®¹å™¨ -->
		<div id="app-container"
			class="max-w-3xl w-full bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl p-5 border border-amber-100 mt-8 md:mt-4">
			<!-- æ ‡é¢˜åŒº -->
			<div class="text-center mb-4">
				<h1 class="text-2xl font-bold title-font text-red-900">ğŸŒ¿ ä¸‰ç„¦æ¢ç´¢ä¹‹æ—…</h1>
				<p class="text-amber-700 text-sm">æ¯èµ°ä¸€æ­¥ï¼Œå°è¯ç«¥éƒ½ä¼šç»™ä½ é¼“åŠ±ï½</p>
			</div>

			<!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
			<div class="step-indicator no-print" id="stepIndicator"></div>

			<!-- å¤šæ­¥éª¤å®¹å™¨ -->
			<div id="stepsContainer"></div>

			<!-- å¯¼èˆªæŒ‰é’®ç»„ -->
			<div class="flex justify-between mt-6 no-print" id="navButtons">
				<button id="prevBtn" class="btn-nav bg-gray-500 hover:bg-gray-600">â† ä¸Šä¸€å…³</button>
				<button id="nextBtn" class="btn-nav bg-red-700 hover:bg-red-800">ä¸‹ä¸€å…³ â†’</button>
			</div>

			<!-- ç»“æœå±•ç¤ºåŒº (åˆå§‹éšè—) è¶£å‘³ç”»åƒ -->
			<div id="resultContainer" class="hidden"></div>
		</div>

		<!-- éšè—å®¹å™¨ï¼Œç”¨äºç”ŸæˆåŸå§‹ä¸“ä¸šè¡¨æ ¼PDF -->
		<div id="originalFormContainer" style="display:none;"></div>

		<script>
			(function() {
				// ---------- å…¨å±€æ•°æ®å­˜å‚¨ ----------
				window.appData = {
					// åŸºæœ¬ä¿¡æ¯
					patient_name: '',
					gender: '',
					age: '',
					height: '',
					weight: '',
					marriage: [],
					birth_city: '',
					current_city: '',
					occupation: '',
					// æœ›è¯Š
					shen: [],
					complexion: [],
					tongue_body: [],
					tongue_coating: [],
					tongue_color: [],
					edema: [],
					// é—»è¯Š
					auscultation: [],
					// ç”Ÿå‘½ä¿¡æ¯
					diet: [],
					stool: [],
					urine: [],
					sleep: [],
					sweat: [],
					exercise: [],
					// å¥³æ€§ä¸“é¡¹
					menstruation: [],
					leukorrhea: [],
					abortion: [],
					// ä¸‰ç„¦è¯¦ç»†
					lower_jiao: [],
					middle_jiao: [],
					upper_jiao: [],
					// ä¸»è¯‰ç­‰æ–‡æœ¬
					chief_complaint: '',
					present_illness: '',
					past_history: '',
					life_info: '',
					diet_habit: [],
					taste: [],
					dislike_food: '',
					allergy_food: '',
					recent_diet: [],
					recent_diet_details: '',
					// åˆ‡è¯Š
					palpation_renying: '',
					palpation_cunkou: '',
					palpation_abdomen: '',
					palpation_chest: '',
					palpation_limbs: '',
					palpation_other: '',
					// è¾¨è¯ç»“æœ
					pattern_shen: [],
					pattern_qi: [],
					pattern_form: [],
					qi_mechanism: [],
					qi_dynamic: [],
					pathogen: [],
					level: [],
					harmony: [],
					pathogenesis: [],
					biao_ben: [],
					entry_level: [],
					treatment_pathogen: '',
					treatment_biaoben: '',
					daily_advice: '',
					// ç…§ç‰‡
					photos: {
						face: null,
						tongueCoating: null,
						tongueBottom: null,
						hand: null,
						foot: null
					},
					// ç§¯åˆ†
					score: 0
				};

				// ä»localStorageè¯»å–
				const saved = localStorage.getItem('tcmJourneyData');
				if (saved) {
					try {
						Object.assign(appData, JSON.parse(saved));
					} catch (e) {}
				}

				// æ­¥éª¤å®šä¹‰
				const steps = [{
						name: 'åˆè§',
						title: 'ğŸ“‹ åˆæ¬¡è§é¢',
						desc: 'å…ˆè®¤è¯†ä¸€ä¸‹ä½ '
					},
					{
						name: 'æœ›é—»',
						title: 'ğŸ‘€ æœ›é—»å°å‰§åœº',
						desc: 'ç¥ã€è‰²ã€èˆŒã€é—»'
					},
					{
						name: 'èƒ½é‡',
						title: 'âš¡ ç”Ÿå‘½èƒ½é‡',
						desc: 'åƒå–æ‹‰æ’’ç¡ + å¥³æ€§ä¸“å±'
					},
					{
						name: 'ä¸‰ç„¦',
						title: 'ğŸ”¥ ä¸‰ç„¦ç§˜å¢ƒ',
						desc: 'ä¸Šä¸­ä¸‹ç„¦çš„ç—‡çŠ¶'
					},
					{
						name: 'å½±åƒ',
						title: 'ğŸ“¸ å½¢è±¡é‡‡é›†',
						desc: 'ä¸Šä¼ ç…§ç‰‡'
					},
					{
						name: 'ç»“æœ',
						title: 'ğŸ‰ ä½ çš„ç”»åƒ',
						desc: 'ç”Ÿæˆå¥åº·è¡¨æ ¼'
					}
				];

				let currentStep = 0; // 0-5, 5ä¸ºç»“æœé¡µ

				// ç§¯åˆ†æ˜¾ç¤º
				function updateScoreUI() {
					document.getElementById('scoreDisplay').innerText = appData.score || 0;
				}

				// å°è¯ç«¥è¯´è¯
				function say(message) {
					const bubble = document.getElementById('herbalistTalk');
					if (bubble) bubble.innerText = message;
				}

				// å®Œæˆä¸€æ­¥å¢åŠ ç§¯åˆ†
				function addScore(step) {
					if (!appData.score) appData.score = 0;
					appData.score += 10;
					updateScoreUI();
					saveToLocal();
					if (step === 1) say('å“‡ï¼Œå®Œæˆç¬¬ä¸€æ­¥ï¼ç»§ç»­åŠ æ²¹ï½');
					else if (step === 2) say('æœ›é—»é—®åˆ‡ï¼Œä½ å·²å…¥é—¨ï¼');
					else if (step === 3) say('ç”Ÿå‘½èƒ½é‡æ”¶é›†å®Œæ¯•âœ¨');
					else if (step === 4) say('ä¸‰ç„¦åœ°å›¾å¿«ç”»å¥½äº†ï¼');
					else if (step === 5) say('ç…§ç‰‡æ‹å¾—ä¸é”™å“¦ğŸ˜‰');
				}

				// ---------- æ¸²æŸ“æ­¥éª¤æŒ‡ç¤ºå™¨ ----------
				function renderIndicator() {
					const container = document.getElementById('stepIndicator');
					if (!container) return;
					let html = '';
					steps.forEach((s, idx) => {
						let cls = 'step-dot';
						if (idx === currentStep) cls += ' active';
						else if (idx < currentStep) cls += ' completed';
						html += `<div class="${cls}">${idx+1}</div>`;
					});
					container.innerHTML = html;
				}

				// è¾…åŠ©ï¼šç”Ÿæˆå¤é€‰æ¡†é€‰é¡¹
				function makeCheckboxOptions(field, options) {
					return options.map(opt => {
						let checked = (appData[field] && appData[field].includes(opt)) ? 'checked' : '';
						return `<label class="checkbox-item"><input type="checkbox" name="${field}" value="${opt}" ${checked}> ${opt}</label>`;
					}).join('');
				}

				function makeCheckboxGrid(field, options) {
					return options.map(opt => {
						let checked = (appData[field] && appData[field].includes(opt)) ? 'checked' : '';
						return `<label class="flex items-center"><input type="checkbox" name="${field}" value="${opt}" ${checked} class="checkbox-custom"> ${opt}</label>`;
					}).join('');
				}

				function makePhotoBox(type, label) {
					let imgSrc = appData.photos && appData.photos[type] ? appData.photos[type] : '';
					return `
                    <div class="photo-box" data-photo="${type}" onclick="document.getElementById('${type}Input').click()">
                        ${imgSrc ? `<img class="photo-preview" src="${imgSrc}">` : `<span class="photo-placeholder">[${label}]</span>`}
                        <input type="file" id="${type}Input" accept="image/*" class="hidden-input" data-phototype="${type}">
                    </div>
                `;
				}

				// æ­¥éª¤HTML
				function getStepHTML(stepIndex) {
					switch (stepIndex) {
						case 0:
							return `
                        <div class="card space-y-4">
                            <h3 class="text-lg font-bold text-amber-800">ğŸ§‘ åŸºæœ¬èµ„æ–™</h3>
                            <div class="grid grid-cols-2 gap-3">
                                <div><label class="text-sm">å§“å</label><input type="text" name="patient_name" value="${appData.patient_name}" class="input-underline w-full"></div>
                                <div><label class="text-sm">æ€§åˆ«</label>
                                    <select name="gender" class="input-underline w-full" id="genderSelect">
                                        <option value="" ${appData.gender===''?'selected':''}>è¯·é€‰æ‹©</option>
                                        <option value="ç”·" ${appData.gender==='ç”·'?'selected':''}>ç”·</option>
                                        <option value="å¥³" ${appData.gender==='å¥³'?'selected':''}>å¥³</option>
                                    </select>
                                </div>
                                <div><label class="text-sm">å¹´é¾„</label><input type="number" name="age" value="${appData.age}" class="input-underline w-full"></div>
                                <div><label class="text-sm">èº«é«˜(cm)</label><input type="number" name="height" value="${appData.height}" class="input-underline w-full"></div>
                                <div><label class="text-sm">ä½“é‡(kg)</label><input type="number" name="weight" value="${appData.weight}" class="input-underline w-full"></div>
                                <div><label class="text-sm">å©šå§»</label>
                                    <label class="mr-2"><input type="checkbox" name="marriage" value="å·²å©š" ${appData.marriage.includes('å·²å©š')?'checked':''} class="checkbox-custom">å·²å©š</label>
                                    <label><input type="checkbox" name="marriage" value="æœªå©š" ${appData.marriage.includes('æœªå©š')?'checked':''} class="checkbox-custom">æœªå©š</label>
                                </div>
                                <div><label class="text-sm">å‡ºç”ŸåŸå¸‚</label><input type="text" name="birth_city" value="${appData.birth_city}" class="input-underline w-full"></div>
                                <div><label class="text-sm">ç°å±…åœ°</label><input type="text" name="current_city" value="${appData.current_city}" class="input-underline w-full"></div>
                                <div><label class="text-sm">èŒä¸š</label><input type="text" name="occupation" value="${appData.occupation}" class="input-underline w-full"></div>
                            </div>
                        </div>
                    `;
						case 1:
							return `
                        <div class="card space-y-4">
                            <h3 class="text-lg font-bold text-amber-800">ğŸ‘ï¸ æœ›è¯ŠÂ·ç¥</h3>
                            <div class="checkbox-group" data-field="shen">
                                ${makeCheckboxOptions('shen', ['å……è¶³','ä¸è¶³','æ•£ä¹±','ä¸“æ³¨','å®¹æ˜“ç´§å¼ ','ææƒ§ã€æ€•é»‘ã€å™©æ¢¦'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ¨ é¢è‰²</h3>
                            <div class="checkbox-group" data-field="complexion">
                                ${makeCheckboxOptions('complexion', ['æ­£å¸¸','è¿‡äºçº¢äº®','æ— å…‰å½©','æ™¦æš—','è‹ç™½','é»„'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ‘… èˆŒä½“</h3>
                            <div class="checkbox-group" data-field="tongue_body">
                                ${makeCheckboxOptions('tongue_body', ['æ­£å¸¸','èƒ–å¤§','æ­ªæ–œ','ç˜¦å°','é½¿ç—•'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">èˆŒè‹”</h3>
                            <div class="checkbox-group" data-field="tongue_coating">
                                ${makeCheckboxOptions('tongue_coating', ['æ­£å¸¸','åšè…»','å‰¥è„±','æ— è‹”'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">èˆŒè‰²</h3>
                            <div class="checkbox-group" data-field="tongue_color">
                                ${makeCheckboxOptions('tongue_color', ['æ­£å¸¸','è¿‡çº¢','è‹ç™½','ç´«æš—'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ’§ æ°´è‚¿</h3>
                            <div class="checkbox-group" data-field="edema">
                                ${makeCheckboxOptions('edema', ['ä¸‹è‚¢æ°´è‚¿','é¢éƒ¨æ°´è‚¿'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ‘‚ é—»è¯Š</h3>
                            <div class="checkbox-group" data-field="auscultation">
                                ${makeCheckboxOptions('auscultation', ['ç¥ä¸è¶³','ç¥å……è¶³','æ¸…æ™°','æ··ä¹±','å‹‡','æ€¯','æ¾','ç´§','è™š','å®'])}
                            </div>
                        </div>
                    `;
						case 2:
							return `
                        <div class="card space-y-4">
                            <h3 class="text-lg font-bold text-amber-800">ğŸš é¥®é£Ÿ</h3>
                            <div class="checkbox-group" data-field="diet">
                                ${makeCheckboxOptions('diet', ['å°šå¯','èƒƒå£ä¸ä½³ï¼Œå®¹æ˜“è…¹èƒ€','é£Ÿæ¬²äº¢è¿›','é£Ÿç”Ÿå†·ä¸é€‚','æ¸´å–œçƒ­','æ¸´å–œå†·'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ’© å¤§ä¾¿</h3>
                            <div class="checkbox-group" data-field="stool">
                                ${makeCheckboxOptions('stool', ['æ­£å¸¸','ç»å¸¸ä¾¿ç§˜','å¤§ä¾¿æ³»æˆ–ä¾¿æºï¼Œç²˜è…»','ä¾¿å‘³è‡­ç§½'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ’¦ å°ä¾¿</h3>
                            <div class="checkbox-group" data-field="urine">
                                ${makeCheckboxOptions('urine', ['æ­£å¸¸','å¤œå°¿ä¸‰æ¬¡ä»¥ä¸Š','å°¿é¢‘æˆ–å°¿æ€¥','å°¿ä¸å‡€','å°¿ç—›æˆ–è¡€å°¿'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ˜´ ç¡çœ </h3>
                            <div class="checkbox-group" data-field="sleep">
                                ${makeCheckboxOptions('sleep', ['è‰¯å¥½','å°šå¯','å…¥ç¡å›°éš¾','é¢‘ç¹é†’æ¥','å¤šæ¢¦ä¸”æ¢¦å¢ƒç”ŸåŠ¨','å®¹æ˜“æ—©é†’'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ’§ å‡ºæ±—</h3>
                            <div class="checkbox-group" data-field="sweat">
                                ${makeCheckboxOptions('sweat', ['æ­£å¸¸','æ±—å‡ºè¿‡å¤š','ç¡æ—¶æ±—å¤š','å¤´èƒ¸éƒ¨æ±—è¿‡å¤š','å¾ˆå°‘å‡ºæ±—','ä¸‹åŠèº«æ— æ±—','æœ‰å¼‚å¸¸æ°”å‘³'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸƒ è¿åŠ¨</h3>
                            <div class="checkbox-group" data-field="exercise">
                                ${makeCheckboxOptions('exercise', ['åŸºæœ¬ä¸è¿åŠ¨','ç»å¸¸æ•£æ­¥','æ…¢è·‘æˆ–å…¶å®ƒæœ‰æ°§è¿åŠ¨','è‚Œè‚‰è®­ç»ƒ','ä¼ ç»Ÿé”»ç‚¼'])}
                            </div>
                            <!-- å¥³æ€§ä¸“é¡¹ æ ¹æ®æ€§åˆ«æ˜¾ç¤º -->
                            <div id="femaleSection" class="${appData.gender!=='å¥³'?'hidden':''} mt-4 p-3 bg-pink-50 rounded">
                                <h3 class="text-lg font-bold text-pink-700">ğŸŒ¸ å¥³æ€§ä¸“å±</h3>
                                <h4 class="font-semibold">æœˆç»</h4>
                                <div class="checkbox-group" data-field="menstruation">
                                    ${makeCheckboxOptions('menstruation', ['æ­£å¸¸','å‘¨æœŸç¼©çŸ­','å‘¨æœŸå»¶é•¿','å‘¨æœŸä¸å®š','ç»é‡è¿‡å°‘','ç»é‡è¿‡å¤š','ç»è¡€å‘æš—æˆ–æœ‰è¡€å—','æœˆç»è‰²æ·¡','ç—›ç»'])}
                                </div>
                                <h4 class="font-semibold mt-2">ç™½å¸¦</h4>
                                <div class="checkbox-group" data-field="leukorrhea">
                                    ${makeCheckboxOptions('leukorrhea', ['æ­£å¸¸','é‡å¤šï¼Œæ¸…ç¨€','ç²˜ç¨ ï¼Œè‰²é»„ï¼Œæˆ–ç‰¹æ®Šæ°”å‘³','æ—¶æœ‰å¦‡ç§‘æ„ŸæŸ“','æ…¢æ€§å¦‡ç§‘ç‚ç—‡'])}
                                </div>
                                <h4 class="font-semibold mt-2">æµäº§å²</h4>
                                <div class="checkbox-group" data-field="abortion">
                                    ${makeCheckboxOptions('abortion', ['1æ¬¡','2æ¬¡','3æ¬¡æˆ–æ›´å¤š'])}
                                </div>
                            </div>
                        </div>
                    `;
						case 3:
							return `
                        <div class="card space-y-4">
                            <h3 class="text-lg font-bold text-amber-800">â¬‡ï¸ ä¸‹ç„¦ (ç²¾ã€å…ƒæ°”) ç›¸å…³ç—‡çŠ¶</h3>
                            <div class="grid grid-cols-2 gap-1 text-sm" data-field="lower_jiao">
                                ${makeCheckboxGrid('lower_jiao', ['çš®è‚¤æš—æ·¡','è‚Œè‚‰æ¶ˆç˜¦','èº«ä½“è™šå†·','è…°é…¸','å¤œå°¿å¤š','å¤§å°ä¾¿é¢‘ç¹','ç²¾åŠ›ä¸è¶³','è®°å¿†åŠ›ä¸‹é™','æƒ…ç»ªä¸ç¨³','è§†åŠ›ä¸‹é™','è‚šå­å¾ˆå¤§','å¦‡ç§‘æˆ–æ€§åŠŸèƒ½','ææƒ§æ€•é»‘','è‡ªå¹¼ä½“å¼±','é•¿æœŸæ³Œå°¿é—®é¢˜','æ°´è‚¿','è¡°è€ç—´å‘†','å°¿è›‹ç™½è‚¾ç—…','è‚ç‚è‚ç¡¬åŒ–','ç³–å°¿ç—…ç—›é£','å¿ƒè„‘è¡€ç®¡','å¸¦çŠ¶ç–±ç–¹','æ¶æ€§è‚¿ç˜¤','å…ç–«ç³»ç»Ÿç–¾ç—…','å™¨å®˜è¡°ç«­'])}
                                <label class="flex items-center col-span-2"><input type="checkbox" name="lower_jiao" value="å…¶å®ƒ" ${appData.lower_jiao.includes('å…¶å®ƒ')?'checked':''}> å…¶å®ƒé‡å¤§ç–¾ç—…ï¼š<input type="text" name="lower_jiao_other" value="" class="input-underline w-40"></label>
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">â¬†ï¸ ä¸­ç„¦ (ä¸­æ°”) ç›¸å…³ç—‡çŠ¶</h3>
                            <div class="grid grid-cols-2 gap-1 text-sm" data-field="middle_jiao">
                                ${makeCheckboxGrid('middle_jiao', ['æ²¡èƒƒå£','èƒƒç—›è…¹ç—›','å£æ°”é‡','é’æ˜¥ç—˜','æ…¢æ€§çš®è‚¤ç—…','ä½“å¼±æ— åŠ›','æ¶ˆç˜¦','è‚¥èƒ–','é«˜è¡€è„‚è„‚è‚ªè‚','é«˜è¡€ç³–é«˜å°¿é…¸','èƒ†ç»“çŸ³','å„ç§æ¯è‚‰','ä¹³è…ºå¢ç”Ÿ','å¤§ä¾¿å¼‚å¸¸'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">â¬†ï¸ ä¸Šç„¦ (å«æ°”) ç›¸å…³ç—‡çŠ¶</h3>
                            <div class="checkbox-group" data-field="upper_jiao">
                                ${makeCheckboxOptions('upper_jiao', ['å¼‚å¸¸å‡ºæ±—','åå¤æ„Ÿå†’','æ¶é£ã€æ€•å¯’ã€ç»å¸¸å–·åš','çš®è‚¤ã€é¼»å­è¿‡æ•ç—‡çŠ¶','é•¿æœŸå’³å—½','æ€¥æ€§è¨éº»ç–¹'])}
                            </div>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ“ ä¸»è¯‰</h3>
                            <textarea name="chief_complaint" rows="2" class="form-textarea">${appData.chief_complaint}</textarea>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ“œ ç°ç—…å²</h3>
                            <textarea name="present_illness" rows="3" class="form-textarea">${appData.present_illness}</textarea>
                            <h3 class="text-lg font-bold text-amber-800 mt-4">ğŸ“š æ—¢å¾€å²</h3>
                            <textarea name="past_history" rows="2" class="form-textarea">${appData.past_history}</textarea>
                        </div>
                    `;
						case 4:
							return `
                        <div class="card space-y-4">
                            <h3 class="text-lg font-bold text-amber-800">ğŸ“¸ ä¸Šä¼ ä½ çš„ç…§ç‰‡ (ç‚¹å‡»è™šçº¿æ¡†)</h3>
                            <div class="grid grid-cols-3 gap-2">
                                ${makePhotoBox('face', 'é¢éƒ¨')}
                                ${makePhotoBox('tongueCoating', 'èˆŒè‹”')}
                                ${makePhotoBox('tongueBottom', 'èˆŒåº•')}
                                ${makePhotoBox('hand', 'æ‰‹éƒ¨')}
                                ${makePhotoBox('foot', 'è¶³éƒ¨')}
                            </div>
                            <p class="text-xs text-gray-500">è‡ªç„¶å…‰ï¼Œå…³é—­ç¾é¢œï¼Œä¸åŒ–å¦†ï¼Œä¸æˆ´çœ¼é•œ</p>
                        </div>
                    `;
						default:
							return '<div>æœªçŸ¥æ­¥éª¤</div>';
					}
				}

				// æ¸²æŸ“æ­¥éª¤
				function renderStep() {
					const container = document.getElementById('stepsContainer');
					container.innerHTML = getStepHTML(currentStep);
					attachInputListeners();
					// ç…§ç‰‡ä¸Šä¼ ç›‘å¬
					document.querySelectorAll('.photo-box input[type=file]').forEach(input => {
						input.addEventListener('change', handlePhotoUpload);
					});
					// æ€§åˆ«æ”¹å˜æ—¶æ§åˆ¶å¥³æ€§ä¸“é¡¹æ˜¾ç¤º
					const genderSelect = document.querySelector('select[name="gender"]');
					if (genderSelect) {
						genderSelect.addEventListener('change', function(e) {
							const femaleDiv = document.getElementById('femaleSection');
							if (femaleDiv) femaleDiv.classList.toggle('hidden', e.target.value !== 'å¥³');
							updateAppDataFromInputs();
						});
					}
					renderIndicator();
					updateNavButtons();
					// æ ¹æ®æ­¥éª¤è¯´ä¸åŒçš„è¯
					if (currentStep === 0) say('å…ˆå‘Šè¯‰æˆ‘ä½ çš„åŸºæœ¬æƒ…å†µå§ï½');
					else if (currentStep === 1) say('è®©æˆ‘çœ‹çœ‹ä½ çš„ç¥ã€è‰²ã€èˆŒğŸ‘…');
					else if (currentStep === 2) say('åƒå–æ‹‰æ’’ç¡ï¼Œéƒ½æ˜¯å¤§äº‹ï½');
					else if (currentStep === 3) say('ä¸‰ç„¦é‡Œè—ç€ä»€ä¹ˆç§˜å¯†å‘¢ï¼Ÿ');
					else if (currentStep === 4) say('ä¸Šä¼ ç…§ç‰‡ï¼Œè®©æˆ‘çœ‹æ¸…ä½ ğŸŒ¿');
				}

				// å¤„ç†ç…§ç‰‡ä¸Šä¼ 
				function handlePhotoUpload(e) {
					const file = e.target.files[0];
					if (!file) return;
					const reader = new FileReader();
					const photoType = e.target.dataset.phototype;
					reader.onload = (event) => {
						appData.photos[photoType] = event.target.result;
						const box = e.target.closest('.photo-box');
						if (box) {
							box.innerHTML = `<img class="photo-preview" src="${event.target.result}">`;
							const newInput = document.createElement('input');
							newInput.type = 'file';
							newInput.id = `${photoType}Input`;
							newInput.accept = 'image/*';
							newInput.className = 'hidden-input';
							newInput.dataset.phototype = photoType;
							newInput.addEventListener('change', handlePhotoUpload);
							box.appendChild(newInput);
						}
						saveToLocal();
						say('ç…§ç‰‡æ”¶åˆ°ï¼å¾ˆæ¸…æ™°âœ¨');
					};
					reader.readAsDataURL(file);
				}

				// æ›´æ–°appDataä»DOM
				function updateAppDataFromInputs() {
					document.querySelectorAll('input[type=text], input[type=number], select, textarea').forEach(el => {
						if (el.name && !el.name.includes('_other')) {
							appData[el.name] = el.value;
						}
					});
					document.querySelectorAll('input[type=checkbox][name]').forEach(cb => {
						if (!cb.name || cb.name.includes('_other')) return;
						const all = document.querySelectorAll(`input[type=checkbox][name="${cb.name}"]`);
						const checkedVals = Array.from(all).filter(c => c.checked).map(c => c.value);
						appData[cb.name] = checkedVals;
					});
					saveToLocal();
				}

				function saveToLocal() {
					localStorage.setItem('tcmJourneyData', JSON.stringify(appData));
				}

				function attachInputListeners() {
					document.querySelectorAll('input, select, textarea').forEach(el => {
						el.removeEventListener('change', updateAppDataFromInputs);
						el.removeEventListener('input', updateAppDataFromInputs);
						el.addEventListener('change', updateAppDataFromInputs);
						if (el.type !== 'file') el.addEventListener('input', updateAppDataFromInputs);
					});
				}

				function updateNavButtons() {
					const prev = document.getElementById('prevBtn');
					const next = document.getElementById('nextBtn');
					prev.disabled = currentStep === 0;
					if (currentStep === steps.length - 1) {
						next.textContent = 'âœ¨ æŸ¥çœ‹ç»“æœ';
					} else {
						next.textContent = 'ä¸‹ä¸€å…³ â†’';
					}
				}

				// æ˜¾ç¤ºè¶£å‘³ç»“æœé¡µ
				function showResult() {
					document.getElementById('stepsContainer').classList.add('hidden');
					document.getElementById('navButtons').classList.add('hidden');
					document.getElementById('stepIndicator').classList.add('hidden');
					const resultDiv = document.getElementById('resultContainer');
					resultDiv.classList.remove('hidden');
					resultDiv.innerHTML = generateResultHTML();
					say('ä½ çš„ä¸‰ç„¦ç”»åƒå‡ºç‚‰å•¦ï¼ç‚¹å³ä¾§æŒ‰é’®å¯å¯¼å‡ºä¸“ä¸šè¡¨æ ¼ğŸ“„');
				}

				// ç”Ÿæˆè¶£å‘³ç”»åƒ
				function generateResultHTML() {
					const lowerItems = appData.lower_jiao.join('ã€') || 'æ— æ˜æ˜¾ç—‡çŠ¶';
					const middleItems = appData.middle_jiao.join('ã€') || 'æ— æ˜æ˜¾ç—‡çŠ¶';
					const upperItems = appData.upper_jiao.join('ã€') || 'æ— æ˜æ˜¾ç—‡çŠ¶';
					// å¥³æ€§ä¸“é¡¹åŠ å…¥ä¸‹ç„¦æè¿°ï¼ˆå¦‚æœæœ‰ï¼‰
					let femaleExtra = '';
					if (appData.gender === 'å¥³') {
						const menses = appData.menstruation.length ? 'æœˆç»ï¼š' + appData.menstruation.join('ã€') : '';
						const leuc = appData.leukorrhea.length ? 'ç™½å¸¦ï¼š' + appData.leukorrhea.join('ã€') : '';
						if (menses || leuc) femaleExtra = ` (${menses} ${leuc})`;
					}
					const finalLower = lowerItems + femaleExtra;

					const faceImg = appData.photos.face ? `<img src="${appData.photos.face}" class="mini-photo">` : 'æœªä¸Šä¼ ';
					const tongueImg = appData.photos.tongueCoating ?
						`<img src="${appData.photos.tongueCoating}" class="mini-photo">` : 'æœªä¸Šä¼ ';
					const handImg = appData.photos.hand ? `<img src="${appData.photos.hand}" class="mini-photo">` : 'æœªä¸Šä¼ ';

					let diagnosis = [];
					if (appData.lower_jiao.length > 2) diagnosis.push('ä¸‹ç„¦ä¸è¶³');
					if (appData.middle_jiao.length > 2) diagnosis.push('ä¸­ç„¦å¤±è°ƒ');
					if (appData.upper_jiao.length > 2) diagnosis.push('å«æ°”ä¸å›º');
					if (diagnosis.length === 0) diagnosis.push('ä¸‰ç„¦å¹³å’Œï¼Œç²¾ç¥ä¹ƒå›º');
					const advice = 'å»ºè®®ï¼š' + (diagnosis.includes('ä¸‹ç„¦ä¸è¶³') ? ' æ³¨æ„èŠ‚æ¬²å…»ç²¾ï¼Œé€‚å½“ç»ƒä¹ ç«™æ¡©ï¼›' : '') + (diagnosis.includes(
							'ä¸­ç„¦å¤±è°ƒ') ? ' é¥®é£Ÿè§„å¾‹ï¼Œå°‘é£Ÿç”Ÿå†·æ²¹è…»ï¼›' : '') + (diagnosis.includes('å«æ°”ä¸å›º') ? ' æ³¨æ„ä¿æš–ï¼Œé€‚å½“å¢åŠ æœ‰æ°§è¿åŠ¨ï¼›' : '') +
						' ä¿æŒå¿ƒæƒ…èˆ’ç•…ã€‚';

					return `
                    <div class="bg-gradient-to-b from-amber-50 to-white p-5 rounded-2xl border border-amber-200">
                        <h2 class="text-2xl font-bold text-center text-red-800 mb-4">ğŸ§˜ ä½ çš„ä¸‰ç„¦å¥åº·ç”»åƒ</h2>
                        <table class="result-table">
                            <thead><tr><th>ä¸‰ç„¦</th><th>å¯èƒ½è¡¨ç°</th><th>ç…§ç‰‡å‚è€ƒ</th></tr></thead>
                            <tbody>
                                <tr><td class="font-bold">ä¸Šç„¦ (å«æ°”)</td><td>${upperItems}</td><td>${faceImg}</td></tr>
                                <tr><td class="font-bold">ä¸­ç„¦ (è„¾èƒƒ)</td><td>${middleItems}</td><td>${tongueImg}</td></tr>
                                <tr><td class="font-bold">ä¸‹ç„¦ (ç²¾å…ƒ)</td><td>${finalLower}</td><td>${handImg}</td></tr>
                            </tbody>
                        </table>
                        <div class="mt-6 p-4 bg-amber-100/50 rounded-lg">
                            <p class="font-semibold text-amber-900">ğŸ” è¾¨è¯æ–¹å‘ï¼š${diagnosis.join('ï¼Œ')}</p>
                            <p class="text-gray-700 mt-2">ğŸ’¬ ç”Ÿæ´»å°å»ºè®®ï¼š${advice}</p>
                        </div>
                        <div class="flex justify-center gap-4 mt-6 no-print">
                            <button onclick="location.reload()" class="bg-amber-600 text-white px-6 py-2 rounded-full">é‡æ–°æ¢ç´¢</button>
                            <button onclick="window.print()" class="bg-red-700 text-white px-6 py-2 rounded-full">æ‰“å°ç”»åƒ</button>
                        </div>
                    </div>
                `;
				}

				// ---------- ç”ŸæˆåŸå§‹ä¸“ä¸šè¡¨æ ¼HTML (ç”¨äºPDFå¯¼å‡º) ----------
				function generateOriginalFormHTML() {
					// æ­¤å‡½æ•°åº”è¿”å›ä¸æœ€åŸå§‹è¡¨å•å‡ ä¹ä¸€è‡´çš„HTMLï¼Œæ‰€æœ‰å­—æ®µå·²å¡«å…¥appDataçš„å€¼ã€‚
					// ç”±äºåŸè¡¨å•éå¸¸é•¿ï¼Œè¿™é‡Œç”¨ç®€ç•¥ä½†å®Œæ•´çš„æ–¹å¼æ„å»ºä¸€ä¸ªåŸºæœ¬ç»“æ„ï¼Œç¡®ä¿åŒ…å«æ‰€æœ‰å¿…è¦å­—æ®µã€‚
					// ä¸ºèŠ‚çœç¯‡å¹…ï¼Œä»…æ„é€ ä¸€ä¸ªæ ¸å¿ƒè¡¨æ ¼ï¼Œä½†å®é™…ä½¿ç”¨æ—¶å¯ä»¥æ›´è¯¦å°½ã€‚
					let html = `
                    <div style="max-width:210mm; margin:0 auto; background:white; padding:20px; font-family: 'Noto Sans SC',sans-serif;">
                        <h1 style="text-align:center;">ä¼ ç»Ÿä¸­åŒ»ä¸´è¯æ€ç»´è¡¨ï¼ˆä¸“ä¸šç‰ˆï¼‰</h1>
                        <p>å§“åï¼š${appData.patient_name} | æ€§åˆ«ï¼š${appData.gender} | å¹´é¾„ï¼š${appData.age}</p>
                        <p>èº«é«˜ï¼š${appData.height}cm | ä½“é‡ï¼š${appData.weight}kg | å©šå§»ï¼š${appData.marriage.join('/')}</p>
                        <p>å‡ºç”Ÿåœ°ï¼š${appData.birth_city} | ç°å±…åœ°ï¼š${appData.current_city} | èŒä¸šï¼š${appData.occupation}</p>
                        <h3>æœ›è¯Š</h3>
                        <p>ç¥ï¼š${appData.shen.join('ã€')}</p>
                        <p>é¢è‰²ï¼š${appData.complexion.join('ã€')}</p>
                        <p>èˆŒä½“ï¼š${appData.tongue_body.join('ã€')} | èˆŒè‹”ï¼š${appData.tongue_coating.join('ã€')} | èˆŒè‰²ï¼š${appData.tongue_color.join('ã€')}</p>
                        <p>æ°´è‚¿ï¼š${appData.edema.join('ã€')}</p>
                        <h3>é—»è¯Š</h3>
                        <p>${appData.auscultation.join('ã€')}</p>
                        <h3>ç”Ÿå‘½ä¿¡æ¯</h3>
                        <p>é¥®é£Ÿï¼š${appData.diet.join('ã€')}</p>
                        <p>å¤§ä¾¿ï¼š${appData.stool.join('ã€')}</p>
                        <p>å°ä¾¿ï¼š${appData.urine.join('ã€')}</p>
                        <p>ç¡çœ ï¼š${appData.sleep.join('ã€')}</p>
                        <p>å‡ºæ±—ï¼š${appData.sweat.join('ã€')}</p>
                        <p>è¿åŠ¨ï¼š${appData.exercise.join('ã€')}</p>
                        ${appData.gender === 'å¥³' ? `
                        <h3>å¥³æ€§ä¸“é¡¹</h3>
                        <p>æœˆç»ï¼š${appData.menstruation.join('ã€')}</p>
                        <p>ç™½å¸¦ï¼š${appData.leukorrhea.join('ã€')}</p>
                        <p>æµäº§å²ï¼š${appData.abortion.join('ã€')}</p>` : ''}
                        <h3>ä¸‰ç„¦é—®è¯Š</h3>
                        <p>ä¸‹ç„¦ï¼š${appData.lower_jiao.join('ã€')}</p>
                        <p>ä¸­ç„¦ï¼š${appData.middle_jiao.join('ã€')}</p>
                        <p>ä¸Šç„¦ï¼š${appData.upper_jiao.join('ã€')}</p>
                        <p>ä¸»è¯‰ï¼š${appData.chief_complaint}</p>
                        <p>ç°ç—…å²ï¼š${appData.present_illness}</p>
                        <p>æ—¢å¾€å²ï¼š${appData.past_history}</p>
                        <h3>ç…§ç‰‡ï¼ˆå·²ä¸Šä¼ ï¼‰</h3>
                        <div style="display:flex; gap:10px;">
                            ${appData.photos.face ? '<img src="'+appData.photos.face+'" style="width:80px;">' : 'é¢éƒ¨æœªä¸Šä¼ '}
                            ${appData.photos.tongueCoating ? '<img src="'+appData.photos.tongueCoating+'" style="width:80px;">' : 'èˆŒè‹”æœªä¸Šä¼ '}
                            ${appData.photos.tongueBottom ? '<img src="'+appData.photos.tongueBottom+'" style="width:80px;">' : 'èˆŒåº•æœªä¸Šä¼ '}
                            ${appData.photos.hand ? '<img src="'+appData.photos.hand+'" style="width:80px;">' : 'æ‰‹éƒ¨æœªä¸Šä¼ '}
                            ${appData.photos.foot ? '<img src="'+appData.photos.foot+'" style="width:80px;">' : 'è¶³éƒ¨æœªä¸Šä¼ '}
                        </div>
                        <p>å¡«è¡¨æ—¥æœŸï¼š${new Date().toLocaleDateString('zh-CN')}</p>
                    </div>
                `;
					return html;
				}

				// å¯¼å‡ºPDFï¼šå°†åŸå§‹è¡¨æ ¼æ¸²æŸ“åˆ°éšè—divï¼Œç„¶åå¯¼å‡º
				window.generatePDF = function() {
					const originalHTML = generateOriginalFormHTML();
					const container = document.getElementById('originalFormContainer');
					container.innerHTML = originalHTML;
					container.style.display = 'block';

					const opt = {
						margin: [10, 10, 10, 10],
						filename: `ä¸­åŒ»ä¸´è¯è¡¨_${appData.patient_name || 'æœªå‘½å'}_${new Date().toISOString().slice(0,10)}.pdf`,
						image: {
							type: 'jpeg',
							quality: 0.95
						},
						html2canvas: {
							scale: 2,
							useCORS: true,
							logging: false
						},
						jsPDF: {
							unit: 'mm',
							format: 'a4',
							orientation: 'portrait'
						}
					};
					html2pdf().set(opt).from(container).save().then(() => {
						container.style.display = 'none';
						container.innerHTML = '';
					}).catch(() => {
						alert('PDFç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•');
						container.style.display = 'none';
					});
				};

				// å¯¼èˆªäº‹ä»¶
				function init() {
					renderStep();
					updateScoreUI();
					document.getElementById('prevBtn').addEventListener('click', () => {
						if (currentStep > 0) {
							currentStep--;
							renderStep();
						}
					});
					document.getElementById('nextBtn').addEventListener('click', () => {
						// å…ˆä¿å­˜å½“å‰æ­¥æ•°æ®
						updateAppDataFromInputs();
						if (currentStep < steps.length - 1) {
							// å®Œæˆè¿™ä¸€æ­¥ï¼Œå¢åŠ ç§¯åˆ†ï¼ˆä½†é¿å…é‡å¤åŠ ï¼‰
							if (currentStep < steps.length - 1 && !appData[`step${currentStep}Done`]) {
								addScore(currentStep + 1);
								appData[`step${currentStep}Done`] = true;
							}
							currentStep++;
							renderStep();
						} else {
							// æœ€åä¸€å…³ï¼Œæ˜¾ç¤ºç»“æœ
							if (!appData[`step5Done`]) {
								addScore(6);
								appData[`step5Done`] = true;
							}
							showResult();
						}
					});
				}

				init();
			})();
		</script>
		<!-- è¡¥ä¸æ ·å¼ -->
		<style>
			.input-underline {
				border: none;
				border-bottom: 1px solid #8b7355;
				background: transparent;
				padding: 2px 4px;
				font-size: 10pt;
				width: 100%;
			}

			.input-underline:focus {
				outline: none;
				border-bottom: 2px solid #dc2626;
			}

			.checkbox-custom {
				appearance: none;
				width: 14px;
				height: 14px;
				border: 1.5px solid #8b7355;
				border-radius: 2px;
				position: relative;
				cursor: pointer;
				display: inline-block;
				vertical-align: middle;
				margin-right: 4px;
			}

			.checkbox-custom:checked {
				background-color: #dc2626;
				border-color: #dc2626;
			}

			.checkbox-custom:checked::after {
				content: 'âœ“';
				position: absolute;
				color: white;
				font-size: 10px;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
			}

			.form-textarea {
				width: 100%;
				border: 1px solid #d1d5db;
				border-radius: 8px;
				padding: 8px;
				font-size: 9.5pt;
			}

			.hidden {
				display: none;
			}
		</style>
	</body>
</html>
